"""
공공임대 기존주택 매입심사 - 검증 요구 조건 (단일 출처)

- 규칙 개수: RULE_COUNT = len(RULES_LIST). 새 규칙 추가 시 RULES_LIST와 VERIFICATION_RULES_34 본문에 추가.
- " "(따옴표) 안 = 필수 서류. 보완서류 = 미준비 서류.
- 인감 일치율 45% (규칙 4). EnhancedValidator.SEAL_MATCH_THRESHOLD 등과 동기화 유지.
"""

VERIFICATION_RULES_34 = """
## 대전제
- 서류를 철저히 조사하여 기재된 내용을 누락 없이 추출·검사할 것.
- 모든 서류는 발급날짜 혹은 작성일자를 확인할 것.
- " "(따옴표) 안에 있는 내용은 반드시 있어야 할 서류 목록임.
- 여러 서류가 서로 수치가 일치하는지 검증 절차를 거칠 것.
- 보완서류로 지정된 항목은 제대로 준비되지 않은 서류임.

## 검증 요구 조건 (34개)

1. "주택매도 신청서" 서류의 존재 유무. 없으면 보완서류 항목으로 뺄 것.

2. "주택매도 신청서"의 작성 일자가 우리 회사가 공고한 특정 날짜 이후인지 유효성 검사. 한국토지주택공사 청약플러스 홈페이지 게시일을 확인하여 검사할 것. 정정공고가 있다면, 정정공고 이전에 접수된 기존 공고 역시 유효한 것으로 간주. (예: 기존 공고 25년 7월 5일, 정정 공고 25년 9월 25일이면 7월 30일 접수 건도 유효. 7월 5일 이전 작성/발급 서류는 전부 보완서류 항목으로 뺄 것.)

3. "주택매도 신청서"의 소유주 란에 성명, 생년월일, 현거주지 주소, 휴대전화번호, 이메일주소가 다 기재되어 있는지 검사. 하나라도 없으면 보완서류 항목으로 뺄 것.

4. "주택매도 신청서"의 소유주 (인) 란에 소유주의 이름과 일치하는 "본인발급용 인감증명서"를 찾아 인감 형태가 유사한지 검증. 인식률 45% 이상이면 정상, 미만이면 보완서류 항목으로 뺄 것.

5. "주택매도 신청서"의 대리인 란에 기재된 내용이 있다면, 그 대리인 이름과 일치하는 "대리인신분증사본" 존재 여부 점검. 있으면 이름 동일 여부 확인. 불일치하면 보완서류 항목으로 뺄 것.

6. "주택매도 신청서", "토지대장", "토지이용계획확인서" 이 3개 서류에 기재된 대지면적이 모두 일치하는지 확인. 하나라도 다르면 보완서류 항목으로 뺄 것.

7. "주택매도 신청서"에 기재된 건물사용승인일이 "건축물 대장 표제부"에 기재된 사용승인일과 일치하는지 검사. 불일치하면 보완서류 항목으로 뺄 것.

8. "매도신청주택 임대현황"에 기재된 각 호와 그 호의 전용면적이 "건축물대장 전유부"의 호와 전용면적 일치 여부 검사. 다르게 기재된 호가 있으면 그 호에 대한 것만 보완서류 항목으로 뺄 것.

9. "주택매도 신청서"의 대리인 란에 기재된 내용이 조금이라도 있으면 대리접수로 간주하고 "위임장" 유무 검사. "위임장"이 없으면 보완서류 항목으로 뺄 것.

10. "위임장"에도 소재지와 대지면적이 제대로 기재됐는지 검토. 틀린 것이 있으면 보완서류 항목으로 뺄 것.

11. "위임장"에 위임자의 인적사항·인감도장, 수임자의 인적사항·인감도장이 각각 제대로 되어 있는지 검사. 문서 작성일도 공고일 이후인지 검사. 하나라도 일치하지 않으면 보완서류 항목으로 뺄 것.

12. "소유자 인감증명서" 한 번 더 체크할 것.

13. "소유자 신분증 사본" 존재 여부 검사. 신분증은 자동차 운전면허증 앞면, 주민등록증 앞면. 없으면 보완서류 항목으로 뺄 것.

14. 주택 소유자가 여러 명이면, 개개인 모두의 신분증이 필요. 부족하면 보완서류 항목으로 뺄 것.

15. 주택 소유자가 법인이면 "법인용 사업자 등록증", "법인용 인감증명서", "법인 등기사항전부증명서 1부", "법인대표이사 및 등기 이사(사내이사, 감사) 모두의 신분증 1부"를 빠짐없이 받아야 함. 미비 시 보완서류 항목으로 뺄 것.

16. "개인정보 수집 이용 및 제공 동의서" 소유자와 대리인이 각각 작성했는지, 작성일자·인감도장 각각 일치하는지 철저히 검사. 다르면 보완서류 항목으로 뺄 것.

17. 매도자(소유자)가 법인인 경우 "연간 계약건수 상한 여부 검증용 개인정보 수집 이용동의서"를 추가로 받아야 함. 대표이사, 사내이사, 감사 모두 자필 서명이 있어야 함. 한 명이라도 빠지면 즉시 보완서류 항목으로 뺄 것.

18. 대리인이 공인중개사이면 "중개사무소 등록증", "중개사 사업자등록증" 두 서류가 모두 있어야 하고, 주택매도 신청서와 중개사무소 등록증 상 동일 인감인지 반드시 확인. 미비/불일치 시 보완서류 항목으로 뺄 것.

19. "청렴서약서"는 소유자, 대리인, 중개사가 모두 작성해야 함. 작성자와 일치하는 인감도장이 날인되어 있어야 하고, 개인 신청이면 주민등록번호, 법인 신청이면 사업자 등록번호가 제대로 되어 있는지 꼼꼼히 검토. 법인인데 소유주 주민등록번호를 적은 경우 등 잘못된 부분이 있으면 보완서류 항목으로 뺄 것.

20. "공사직원여부 확인서"는 매도신청하는 주택의 소유자만 작성. 소유자 이름, 인감도장, 작성일자 확인.

21. "건축물대장"은 3종류로 구별. 한 필지 내 여러 동이 있으면 "총괄표제부", 한 동이면 "표제부"를 받아야 함. "건축물 대장 표제부"에서 사용승인일, 내진설계 적용 여부, 주차장 옥외·옥내 각각 대수, 기계식 주차장 대수, 지하층 여부, 승강기 설치 여부를 철저·꼼꼼히 추출할 것.

22. "건축물대장 전유부"에서 접수된 세대들의 전용면적이 16제곱미터 이상 85제곱미터 이하인지 반드시 점검할 것.

23. "건축물현황도"는 신청 건물의 배치도, 모든 층의 층별 평면도, 접수 세대의 호별 평면도가 모두 있어야 하고 반드시 지자체 발급분이어야 함. 지자체 발급이 아닌 건축사무소 도면이면 보완서류 항목으로 뺄 것.

24. "토지대장"은 대지면적 확인, 발급일자가 공고일 이후인지 점검. 모든 필지가 있어야 함. 대지면적 이상(매도신청서·토지이용계획확인서와 다른 경우) 또는 필지 누락이 있으면 보완서류 항목으로 뺄 것.

25. "토지이용계획확인원"도 대지면적 확인 및 모든 필지 필요. 재정비촉진지구, 정비구역, 공공주택지구, 택지개발지구 여부 확인 후 해당되면 보완서류 항목으로 뺄 것. 토지이용규제기본법 시행령 제9조 제4항 각호 해당 사항은 텍스트 추출하여 별도로 제시할 것.

26. "토지 등기부등본"의 대지면적 확인, 모든 필지가 빠짐없이 있는지 검토할 것.

27. "건물 등기부등본"의 모든 호가 빠짐없이 존재하는지 확인. 공부상 근저당, 압류 및 신탁 여부를 확인하여 따로 알릴 것. 빠진 호가 하나라도 있으면 보완서류 항목으로 뺄 것.

28. 등기부등본에 기재된 건물이 신탁 계약된 건물이면 "신탁원부계약서"와 "신탁물건 매매 권한 확인서"를 받아야 함. 권한 확인서에는 모든 관계인의 서명·인감도장이 있어야 함.

29. "준공도면"을 확인하고, 도면 파일 내 주단면도·종단면도 등 해당 페이지를 검토하여 외벽마감재료, 외벽단열재료, 필로티 구조인 경우 필로티 마감재료·필로티 단열재료의 자재명을 추출할 것.

30. 29번에서 검토한 자재에 대한 "시험성적서"와 "납품확인서"가 필요. 외벽 마감재가 석재일 경우 시험성적서는 없어도 되고 납품확인서만 필요. 시험성적서는 반드시 열방출시험과 가스유해성 시험 두 항목이 있어야 함. 열전도율 시험은 제외. 열방출시험+가스유해성 시험 조합이 아니면 보완서류 항목으로 뺄 것.

31. 표제부 상에서 근생(근로자생활시설) 여부를 확인할 것.

32. 전유부의 면적을 살펴보고 최소 면적과 최대 면적을 각각 구할 것. 해당 면적이 몇 호인지까지 데이터로 제시할 것.

33. 건물 등기부등본 상에 민간임대용으로 명시되어 있는지 확인할 것.

34. 토지 지목을 확인하고 용도 및 각종 행위제한 등이 있는지 확인할 것.
"""

# 검증 엔진용 규칙 번호·이름·요약 (34개)
RULES_LIST = [
    (1, "주택매도신청서_존재", "주택매도 신청서 존재 유무"),
    (2, "주택매도신청서_작성일", "작성일자 공고일 이후·정정공고 규칙 적용"),
    (3, "주택매도신청서_소유자정보", "소유주 란 성명·생년월일·주소·연락처·이메일"),
    (4, "본인발급용_인감증명서", "소유주 인감과 인감증명서 45% 이상 유사"),
    (5, "대리인_신분증사본", "대리인 란과 대리인신분증사본 이름 일치"),
    (6, "대지면적_3서류_일치", "주택매도신청서·토지대장·토지이용계획확인서 대지면적 일치"),
    (7, "사용승인일_일치", "주택매도신청서와 건축물대장 표제부 사용승인일 일치"),
    (8, "임대현황_전유부_호별_일치", "매도신청주택 임대현황과 건축물대장 전유부 호·전용면적 일치"),
    (9, "위임장_유무", "대리접수 시 위임장 유무"),
    (10, "위임장_소재지_대지면적", "위임장 소재지·대지면적 기재 정확성"),
    (11, "위임장_인적사항_인감_작성일", "위임자·수임자 인적사항·인감·작성일 공고일 이후"),
    (12, "소유자_인감증명서_재확인", "소유자 인감증명서 한 번 더 체크"),
    (13, "소유자_신분증사본", "소유자 신분증 사본(운전면허·주민등록증 앞면)"),
    (14, "다수소유자_신분증", "소유자 여러 명일 때 모두 신분증"),
    (15, "법인_필수서류", "법인 시 법인용 서류·등기이사 등 신분증 완비"),
    (16, "개인정보동의서", "소유자·대리인 각각 작성·작성일자·인감 일치"),
    (17, "법인_계약건수동의서", "법인 시 연간 계약건수 상한 동의서·전원 자필 서명"),
    (18, "중개사_등록증_사업자등록증_인감", "공인중개사 시 중개사무소 등록증·사업자등록증·인감 일치"),
    (19, "청렴서약서", "소유자·대리인·중개사 모두 작성·인감·주민번호 또는 사업자번호"),
    (20, "공사직원여부확인서", "소유자만 작성·이름·인감·작성일자"),
    (21, "건축물대장_표제부", "총괄/표제부 구분·사용승인일·내진·주차·지하·승강기 등"),
    (22, "건축물대장_전유부_면적", "전용면적 16㎡ 이상 85㎡ 이하"),
    (23, "건축물현황도", "배치도·층별평면도·호별평면도·지자체 발급분"),
    (24, "토지대장", "대지면적·발급일 공고일 이후·모든 필지"),
    (25, "토지이용계획확인원", "대지면적·모든 필지·제외구역·시행령 제9조 제4항 텍스트 추출"),
    (26, "토지_등기부등본", "대지면적·모든 필지"),
    (27, "건물_등기부등본", "모든 호·근저당·압류·신탁 여부"),
    (28, "신탁_서류", "신탁 건물 시 신탁원부계약서·권한 확인서"),
    (29, "준공도면", "외벽마감·외벽단열·필로티 마감·단열 자재명 추출"),
    (30, "시험성적서_납품확인서", "열방출+가스유해성 시험·열전도율 제외"),
    (31, "표제부_근생여부", "표제부 상 근생 여부"),
    (32, "전유부_최소최대면적_호", "전유부 최소·최대 면적 및 해당 호"),
    (33, "등기부등본_민간임대용", "건물 등기부등본 민간임대용 명시 여부"),
    (34, "토지_지목_행위제한", "토지 지목·용도·행위제한 확인"),
]

# 규칙 개수 단일 출처. 새 규칙 추가 시 RULES_LIST에 (번호, 이름, 요약) 추가하고 위 VERIFICATION_RULES_34 본문에 번호·내용 추가할 것.
RULE_COUNT = len(RULES_LIST)


def get_verification_rules_text() -> str:
    """AI·검증 엔진에 넣을 규칙 문구. RULE_COUNT와 헤더 동기화."""
    return VERIFICATION_RULES_34.replace("(34개)", f"({RULE_COUNT}개)")
